<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>lemueIO SecMonitor</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="/assets/hfish-ui.1.2.12.css" />
    <style type="text/css">
        .main-loading-wrap {
            text-align: center;
            margin-top: 100px;
            color: rgba(17, 18, 34, 0.6);
            font-size: 12px;
        }

        .lds-dual-ring {
            display: inline-block;
            width: 30px;
            height: 30px;
            margin-bottom: 10px;
        }

        .lds-dual-ring:after {
            content: " ";
            display: block;
            width: 24px;
            height: 24px;
            margin: 8px;
            border-radius: 50%;
            border: 2px solid rgba(17, 18, 34, 0.8);
            border-color: rgba(17, 18, 34, 0.8) transparent rgba(17, 18, 34, 0.8) transparent;
            animation: lds-dual-ring 1.2s linear infinite;
            animation: lds-dual-ring 1.2s linear infinite;
        }

        @keyframes lds-dual-ring {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <!-- <link rel="stylesheet" href="/styles/index.css"> -->
    <script type="text/javascript">
        if (!('remove' in Element.prototype)) {
            Element.prototype.remove = function () {
                if (this.parentNode) {
                    this.parentNode.removeChild(this);
                }
            };
        }
    </script>
    <link rel="shortcut icon" href="/assets/favicon.ico">
</head>

<body>
    <div id="app">
        <div class="main-loading-wrap">
            <div class="spinner-wrapper">
                <div class="lds-dual-ring"></div>
                <div class="spinner-txt">加载中...</div>
            </div>
        </div>
    </div>
    <script>
        __REACT_DEVTOOLS_GLOBAL_HOOK__ = parent.__REACT_DEVTOOLS_GLOBAL_HOOK__;
    </script>
    <script type="text/javascript" defer src="/assets/flags/svgxuse.min.js"></script>
    <script type="text/javascript" src="/assets/dllSelf.09a1636445d39f4f9ec3.js"></script>
    <script type="text/javascript" src="/assets/app.6539b5af.js"></script>
    <script>
        // Branding Configuration
        const BRAND_TITLE = "Honey Scan Active Defense";
        const LOGO_PATH = '/assets/logo_bear.png';

        const patchBrandingAggressive = () => {
            // Global: Keep Title Consistent
            if (document.title !== "lemueIO SecMonitor") {
                document.title = "lemueIO SecMonitor";
            }

            // === UNIVERSAL TEXT REPLACEMENT (Runs everywhere) ===
            const replaceTextContent = (selector, target, replacement) => {
                try {
                    const elements = document.querySelectorAll(selector);
                    elements.forEach(el => {
                        if (el && el.innerText && el.innerText.includes(target) && !el.dataset.branded) {
                            el.innerHTML = el.innerHTML.replace(target, replacement);
                            el.dataset.branded = 'true';
                        }
                    });
                } catch (e) { console.error('Branding patch error:', e); }
            };

            // Specific HFish Dashboard Elements
            replaceTextContent('div, span, h1, h2, h3, h4, p', 'XX Company Threat Monitor', 'lemueIO SecMonitor');
            replaceTextContent('*', 'HFish Attack Map', 'lemueIO SecMonitor');
            replaceTextContent('*', 'HFish Statistics', 'lemueIO SecStatistics');
            replaceTextContent('*', 'Live Threat Monitor', 'lemueIO Active Intelligence Feed');
            replaceTextContent('*', 'HFish support', 'Honey Scan supports');

            // Route Detection: Only apply aggressive layout changes on Login Page
            const isLogin = location.href.includes('/login') || location.hash.includes('login');

            if (isLogin) {
                // 1. Logo Replacement (Left Side - SVG Wrapper)
                const leftWrapper = document.querySelector('div[class*="left-wrapper"]');
                if (leftWrapper) {
                    const svgs = leftWrapper.querySelectorAll('svg');
                    svgs.forEach(svg => {
                        if (svg.innerHTML.includes('#hfish') || svg.innerHTML.includes('hfish')) {
                            const container = svg.parentElement;
                            if (container && !container.dataset.patched && !container.querySelector('input')) {
                                container.innerHTML = '';
                                const newLogo = document.createElement('img');
                                newLogo.src = LOGO_PATH;
                                newLogo.className = 'honey-scan-logo';
                                container.appendChild(newLogo);
                                container.dataset.patched = 'true';
                            }
                        }
                    });
                }

                // 2. Central Branding Replacement (SVG -> HTML)
                const rightWrapper = document.querySelector('div[class*="right-wrapper"]');
                if (rightWrapper) {
                    const brandSvgs = rightWrapper.querySelectorAll('svg');
                    brandSvgs.forEach(svg => {
                        if (svg.innerHTML.includes('hfish') || svg.getAttribute('class')?.includes('onefish-logo')) {
                            if (!svg.dataset.patched) {
                                const container = document.createElement('div');
                                container.className = 'honey-scan-brand';

                                const title = document.createElement('div');
                                title.innerText = "Honey Scan";
                                title.className = 'honey-scan-title';

                                const pill = document.createElement('div');
                                pill.innerText = "Active Defense Platform";
                                pill.className = 'honey-scan-pill';

                                container.appendChild(title);
                                container.appendChild(pill);

                                svg.replaceWith(container);
                                container.dataset.patched = 'true';
                            }
                        }
                    });
                }

                // 3. Inject CSS (Safe, Proven Styles)
                if (!document.getElementById('branding-style')) {
                    const style = document.createElement('style');
                    style.id = 'branding-style';
                    style.innerHTML = `
                      /* LOGIN PAGE ONLY STYLES */
                      html, body {
                          background-color: #0f172a !important; /* Cyber Dark */
                          margin: 0 !important;
                          padding: 0 !important;
                          overflow-x: hidden !important;
                      }

                      /* HIDE ORIGINAL HEADER */
                      div[class*="header"], header, .el-header, .header-wrapper, nav, section[class*="header"], 
                      .screen-header-left-title, .screen-title,
                      div[class*="top"], .el-card__header {
                          display: none !important;
                      }
                      div[class*="header"] * { display: none !important; }

                      /* Fix Title Spacing */
                      div[class*="index-cssmodule__login-wrapper"], .login-container, .login-box {
                          margin-top: 10px !important; 
                      }
                      
                      /* Login Button Green - AGGRESSIVE Override */
                      div[class*="index-cssmodule__btn"], 
                      button[class*="index-cssmodule__btn"], 
                      .el-button--primary,
                      button {
                          background-color: #4ade80 !important;
                          border-color: #4ade80 !important;
                          color: #0f172a !important; 
                          font-weight: bold !important;
                          box-shadow: none !important;
                      }
                      
                      /* HOVER / FOCUS - Ensure Green */
                      div[class*="index-cssmodule__btn"]:hover, 
                      button[class*="index-cssmodule__btn"]:hover, 
                      .el-button--primary:hover,
                      .el-button--primary:focus {
                          background-color: #22c55e !important;
                          border-color: #22c55e !important;
                          color: #0f172a !important;
                          box-shadow: 0 0 15px rgba(74, 222, 128, 0.6) !important;
                      }
                      
                      /* Fix Input Borders */
                      .el-input__inner, .el-input__inner:focus {
                          border-color: #4ade80 !important;
                      }

                      /* IPv6 Badge & Bottom Text - Force Green */
                      .login-box + div, .login-container + div, 
                      span[class*="ipv6"], div[class*="ipv6"] {
                          color: #4ade80 !important; 
                      }
                      /* Targeted fix for the red text at bottom */
                      div[style*="color: red"], span[style*="color: red"],
                      div[style*="color: rgb(255, 0, 0)"] {
                          color: #4ade80 !important;
                      }

                      /* LOGO NO BACKGROUND */
                      .honey-scan-logo {
                          background: transparent !important;
                          border: none !important;
                      }

                      /* RESPONSIVE DESIGN - ROBUST STACK */
                      @media screen and (max-width: 768px) {
                          div[class*="index-cssmodule__login-wrapper"], 
                          .login-container,
                          div[class*="login-box"] {
                               display: flex !important;
                               flex-direction: column !important;
                               width: 90% !important;
                               margin: 10px auto !important;
                               height: auto !important;
                          }
                          div[class*="left-wrapper"] {
                              width: 100% !important;
                              display: flex !important;
                              justify-content: center !important;
                              margin-bottom: 20px !important;
                              order: 1 !important;
                          }
                          div[class*="right-wrapper"] {
                              width: 100% !important;
                              padding: 20px !important;
                              box-sizing: border-box !important;
                              order: 2 !important;
                          }
                          .honey-scan-logo {
                              width: 180px !important;
                              height: auto !important;
                          }
                      }                      
                      /* Custom Footer */
                      #lemue-footer {
                          position: fixed;
                          bottom: 10px;
                          width: 100%;
                          text-align: center;
                          color: rgba(255, 255, 255, 0.5);
                          font-size: 12px;
                          pointer-events: none;
                          z-index: 9999;
                      }
                    `;
                    document.head.appendChild(style);
                }

                // Inject Footer
                if (!document.getElementById('lemue-footer')) {
                    const footer = document.createElement('div');
                    footer.id = 'lemue-footer';
                    footer.innerHTML = 'for you by lemue.org ♥️';
                    document.body.appendChild(footer);
                }

            } else {
                // CLEANUP for Dashboard
                const style = document.getElementById('branding-style');
                if (style) style.remove();
                const footer = document.getElementById('lemue-footer');
                if (footer) footer.remove();
            }

            // Always Inject Favicons
            const addFavicon = (rel, href, sizes) => {
                if (!document.querySelector(`link[href="${href}"]`)) {
                    let link = document.createElement('link');
                    link.rel = rel;
                    link.href = href;
                    if (sizes) link.sizes = sizes;
                    document.head.appendChild(link);
                }
            };
            if (!window.faviconsPatched) {
                document.querySelectorAll('link[rel="shortcut icon"]').forEach(e => e.remove());
                window.faviconsPatched = true;
            }
            addFavicon('icon', '/assets/favicon.ico');
            addFavicon('icon', '/assets/favicon-32x32.png', '32x32');
            addFavicon('icon', '/assets/favicon-16x16.png', '16x16');
            addFavicon('apple-touch-icon', '/assets/apple-touch-icon.png');
        };

        patchBrandingAggressive();
        setInterval(patchBrandingAggressive, 200);
    </script>
</body>